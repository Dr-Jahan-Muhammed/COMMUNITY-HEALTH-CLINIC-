<!DOCTYPE html><html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Community Health Clinic</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {margin:0; font-family: Arial, sans-serif; background-color:#fdfdfd; color:#333;}
header {display:flex; flex-direction:column; justify-content:center; align-items:center; padding:15px; position:fixed; top:0; width:100%; background:rgba(255,255,255,1); transition: background 0.3s; z-index:1000; box-shadow: 0 2px 5px rgba(0,0,0,0.1);}
body.scrolled header {background:rgba(255,255,255,0.8);}
header h1 {color:red; font-size:1.8rem; display:flex; align-items:center;}
header .cross {color:yellow; font-weight:bold; font-size:1.8rem; margin-left:5px;}
header small {display:block; font-size:0.9rem;}
section {padding:100px 20px 40px;}
.services {display:flex; flex-wrap:wrap; gap:15px; justify-content:center; margin-top:10px;}
.service {flex:1 1 30%; border:1px solid #ddd; border-radius:10px; padding:20px; text-align:center; min-width:120px; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.05);}
.token-section {padding:40px 20px; background:#f0f8ff; border-radius:10px; margin-top:20px;}
.token-display {margin-top:20px;}
.token-box {font-size:2rem; font-weight:bold; color:#ff0000; text-align:center; border:2px dashed #ff0000; border-radius:10px; padding:20px; position:relative; display:inline-block;}
.token-box::after {content:''; position:absolute; top:-5px; left:-5px; width:10px; height:10px; background:#ff0; border-radius:50%; animation: floatRibbon 2s infinite alternate;}
@keyframes floatRibbon {0%{transform:translate(0,0)}100%{transform:translate(5px,-5px)}}
.dashboard {max-width:600px; margin:auto; border:1px solid #ddd; border-radius:10px; padding:10px; display:none; flex-direction:column; gap:5px; background:#f9f9f9;}
.welcome-overlay {position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.9); display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:2000;}
.welcome-overlay h1 {font-size:3rem; color:red;}
.welcome-overlay p {font-size:1.2rem; margin-top:10px;}
.star {font-size:2rem; color:#ccc; cursor:pointer;}
.star.checked {color:gold;}
</style>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body><div class="welcome-overlay" id="welcomeOverlay">
  <h1>WELCOME</h1>
  <p id="welcomeQuote">‚ÄúHealth is wealth.‚Äù</p>
</div><header>
  <small>Since 2003</small>
  <h1>COMMUNITY HEALTH CLINIC <span class="cross">+</span></h1>
  <small>Cheenimukku, Poonoor</small>
  <small>Dr P K MUHAMMED ALI (Chief Physician)</small>
</header><section>
  <h2 class="text-center">Our Services</h2>
  <div class="services">
    <div class="service">General OP üè•</div>
    <div class="service">Nebulisation üí®</div>
    <div class="service">ECG ‚ù§Ô∏è</div>
    <div class="service">Ear Irrigation üëÇ</div>
    <div class="service">IV Fluids üíß</div>
    <div class="service">TT Injection üíâ</div>
    <div class="service">Oxygen Support ü´Å</div>
    <div class="service">Minor Wound Care ü©π</div>
    <div class="service">BP/Diabetes Monitoring ü©∫</div>
    <div class="service">Home Call on Request üè†</div>
    <div class="service">First Aid / Emergency üöë</div>
  </div>
</section><section class="token-section">
  <h2 class="text-center">Take Your Token</h2>
  <p class="text-center">Tokens are only for the next day. Max one per patient (name, age, sex).</p>
  <form class="token-form" id="tokenForm">
    <input type="text" id="patientName" placeholder="Name" required>
    <input type="number" id="patientAge" placeholder="Age" required>
    <select id="patientSex" required>
      <option value="">Select Sex</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>
    <input type="tel" id="patientMobile" placeholder="Mobile Number" required>
    <button type="submit">Get Token</button>
  </form>
  <div class="token-display" id="tokenDisplay"></div>
</section><section>
  <h2>Authorized Dashboard</h2>
  <input type="password" id="dashboardPin" placeholder="Enter View PIN or Master PIN">
  <button onclick="showDashboard()">Enter</button>
  <div class="dashboard" id="dashboardArea"></div>
</section><section>
  <h2>Working Hours</h2>
  <p>Mon-Sat: 9:00 AM - 11:00 PM</p>
  <p>Sun: 9:00 AM - 8:00 PM</p>
  <p>Call to confirm doctor availability.</p>
</section><section class="map">
  <h2>Contact & Location</h2>
  <p>Address: Cheenimukku, Poonoor</p>
</section><section>
  <h2>Feedback</h2>
  <form class="feedback-form" id="feedbackForm">
    <input type="text" placeholder="Name (optional)" id="feedbackName">
    <div id="ratingStars">
      <span class="star" data-value="1">‚òÖ</span>
      <span class="star" data-value="2">‚òÖ</span>
      <span class="star" data-value="3">‚òÖ</span>
      <span class="star" data-value="4">‚òÖ</span>
      <span class="star" data-value="5">‚òÖ</span>
    </div>
    <input type="text" placeholder="Comment" id="feedbackComment">
    <button type="submit">Submit</button>
  </form>
</section><script>
// Firebase config (replace with your own project info)
const firebaseConfig = {apiKey:"YOUR_API_KEY",authDomain:"YOUR_DOMAIN",databaseURL:"YOUR_DB_URL",projectId:"YOUR_PROJECT_ID"};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Welcome overlay
setTimeout(()=>{document.getElementById('welcomeOverlay').style.display='none';},2000);

// Header scroll
window.addEventListener('scroll', () => {
  document.body.classList.toggle('scrolled', window.scrollY > 50);
});

// Token system
let tokenCounter = 0;
const tokenDisplay = document.getElementById('tokenDisplay');
const tokenForm = document.getElementById('tokenForm');
const nextDay = new Date(); nextDay.setDate(nextDay.getDate()+1);

function displayTokenBox(patient){
  tokenDisplay.innerHTML = `<div class="token-box">Token #${patient.token}<br>${nextDay.toDateString()}</div>`;
}

function fetchTokens(){
  db.ref('tokens').once('value').then(snapshot => {
    const data = snapshot.val() || {};
    tokenCounter = Object.keys(data).length;
  });
}
fetchTokens();

tokenForm.addEventListener('submit', e => {
  e.preventDefault();
  const name = document.getElementById('patientName').value;
  const age = document.getElementById('patientAge').value;
  const sex = document.getElementById('patientSex').value;
  const mobile = document.getElementById('patientMobile').value;

  db.ref('tokens').orderByChild('unique').equalTo(`${name}_${age}_${sex}`).once('value', snap => {
    if(snap.exists()){ alert('Token already exists for this patient'); return; }
    tokenCounter++;
    const patient = {name, age, sex, mobile, token: tokenCounter, date: nextDay.toDateString(), unique:`${name}_${age}_${sex}`};
    db.ref('tokens/'+tokenCounter).set(patient);
    displayTokenBox(patient);
    tokenForm.reset();
  });
});

// Feedback submission
const stars = document.querySelectorAll('.star');
let selectedRating = 0;
stars.forEach(star => star.addEventListener('click',()=>{
  selectedRating = star.dataset.value;
  stars.forEach(s=>s.classList.remove('checked'));
  for(let i=0;i<star.dataset.value;i++){stars[i].classList.add('checked');}
}));

document.getElementById('feedbackForm').addEventListener('submit', e=>{
  e.preventDefault();
  const name = document.getElementById('feedbackName').value || 'Anonymous';
  const comment = document.getElementById('feedbackComment').value;
  const feedbackData = {name, comment, rating:selectedRating, date:new Date().toLocaleString()};
  db.ref('feedbacks').push(feedbackData);
  alert('Feedback submitted');
  document.getElementById('feedbackForm').reset();
  stars.forEach(s=>s.classList.remove('checked'));
  selectedRating = 0;
});
</script></body>
</html>
